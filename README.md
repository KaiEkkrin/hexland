# Wall & Shadow

This project contains the source code for Wall & Shadow. It is available under the terms of the [Apache License, version 2.0](http://www.apache.org/licenses/LICENSE-2.0) -- see the LICENSE file.

Wall & Shadow is a lightweight VTT (virtual tabletop) focused on providing a fast, on-the-fly battle map creation experience. It's aimed at groups who might:

* run homebrew campaigns;
* have unruly players who do unexpected things;
* run sandbox adventures in which anything could happen.

I originally built it in 2020 while I was unemployed. Since then the VTT space has become a lot more crowded, but most offerings focus on providing a polished experience given pre-built assets or lots of preparation, not the fast improvisation that I want :).

Wall & Shadow is a map tool only and doesn't attempt to provide dice rolling, player character tracking etc. I use Discord bots for that -- Avrae for D&D, [ThirteenIsh](https://github.com/KaiEkkrin/ThirteenIsh) for other systems.

## Requirements

Wall & Shadow should work well in any modern browser that supports [WebGL 2](https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API#webgl_2). I don't have access to a Mac, so it may or may not work properly on Safari.

For contributing to development I would strongly recommend Linux, either natively or through WSL.

## Tech Stack

- **React 18** + TypeScript + Vite
- **Firebase v11** (Firestore, Functions, Auth, Hosting, Storage)
- **Three.js** for 3D map rendering
- **Bootstrap 5** with react-bootstrap

## Development with VS Code Dev Container (Recommended)

The easiest way to get started is with the VS Code dev container:

### Prerequisites

1. [Docker Desktop](https://www.docker.com/products/docker-desktop) installed and running
2. [Visual Studio Code](https://code.visualstudio.com/) with the [Dev Containers extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers)

### Quick Start

1. Open this repository in VS Code
2. Press `F1` and select **"Dev Containers: Reopen in Container"**
3. Wait for the container to build (5-10 minutes first time)
4. Set up Firebase credentials (see [`.devcontainer/README.md`](.devcontainer/README.md))
5. Build Firebase Functions:
   ```bash
   cd was-web/functions
   yarn build
   ```
6. Start developing:

   ```bash
   cd was-web

   # Terminal 1: Start Firebase emulators
   yarn dev:firebase

   # Terminal 2: Start Vite dev server
   yarn dev:vite
   ```

7. Open http://localhost:3400 in your browser (Firebase Hosting emulator)
   - For development with hot reload, use http://localhost:5000 (Vite dev server)

Running emulators and dev server separately is recommended - you can restart the app without restarting the emulators.

See [`.devcontainer/README.md`](.devcontainer/README.md) for comprehensive documentation.

## Running Tests

```bash
cd was-web

# Unit tests (watch mode)
yarn test:unit

# End-to-end tests (requires dev server running)
yarn test:e2e
```

## Deployment

For production deployment instructions, see **[DEPLOY.md](DEPLOY.md)**.

Quick deploy (after initial setup):

```bash
cd was-web
yarn build
firebase deploy --only hosting    # Web app only (fast)
firebase deploy                   # Everything (includes Functions)
```

## License

Apache License, version 2.0

## AI Policy

I use Generative AI to deal with the tedious, time-consuming parts of maintaining a project like this, such as keeping on top of JavaScript package churn. I'm aware it's a controversial and much-misused technology but having it available to me has made the difference between being able to keep Wall & Shadow running and having to mothball it permanently.

If you feel I have accidentally incorporated copyright code verbatim in this project, in violation of the code's original license, please raise a GitHub Issue with details.
